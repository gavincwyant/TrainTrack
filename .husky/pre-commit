# Pre-commit hook that runs type-checking and linting on staged files
# This ensures code quality before commits are created
#
# To bypass this hook (not recommended), use:
#   git commit --no-verify

echo "Running pre-commit checks..."

# Run TypeScript type checking on the entire project
echo "1/2 Type-checking..."
npm run type-check || {
  echo "Type check failed. Please fix TypeScript errors before committing."
  exit 1
}

# Run ESLint on staged files only (using lint-staged)
echo "2/2 Linting staged files..."
npx lint-staged || {
  echo "Linting failed. Please fix linting errors before committing."
  exit 1
}

echo "Pre-commit checks passed!"
